<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Page</title>
</head>
<body>
<h1>Admin Page</h1>

<!-- Add Event Form -->
<form action="/add_event" method="POST" enctype="multipart/form-data">
  <label for="event_name">Event Name:</label>
  <input type="text" name="event_name" required><br>
  <label for="event_date">Event Date:</label>
  <input type="text" name="event_date" required><br>
  <label for="event_image">Event Image:</label>
  <input type="file" name="event_image" required><br>
  <input type="submit" value="Add Event">
</form>

<hr>

<form action="/delete_event" method="POST">
  <h2>Delete Event</h2>
  <ul id="eventList">
    <!-- The event list will be inserted here using JavaScript -->
  </ul>
  <input type="submit" value="Delete Event">
</form>

<!-- JavaScript to fetch and display event data -->
<script>
  const eventListContainer = document.getElementById('eventList');

  // Function to create a list item for an event
  function createEventListItem(event) {
    const listItem = document.createElement('li');
    listItem.innerHTML = `
            <input type="radio" name="event_id" value="${event.id}">
            ${event.name} (${event.date})
        `;
    return listItem;
  }

  // Function to fetch event data from the server
  function fetchEventList() {
    fetch('/events') // Assuming this route returns event data as JSON
            .then(response => response.json())
            .then(data => {
              // Clear the existing list
              eventListContainer.innerHTML = '';

              // Create list items for each event and append them to the list
              data.forEach(event => {
                eventListContainer.appendChild(createEventListItem(event));
              });
            })
            .catch(error => {
              console.error('Error fetching event data:', error);
            });
  }

  // Call the fetchEventList function when the page loads
  fetchEventList();
</script>

<!-- Logout Button -->
<form action="/logout" method="POST">
  <input type="submit" value="Logout">
</form>
</body>
</html>
